(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44227181"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},4876:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),n("el-breadcrumb-item",{attrs:{to:{path:"/orders"}}},[e._v("订单管理")]),n("el-breadcrumb-item",[e._v("明细列表")]),n("backend-search",{on:{getSearchSuborder:e.getSearchSuborder,parentMethod:e.pagination}})],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{},attrs:{data:e.subOrderData,border:"","show-summary":"","highlight-current-row":"","summary-method":e.getSummaries,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","default-sort":{prop:"order_date",order:"descending"}},on:{select:e.handleSelect,"select-all":e.handleSelect}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),n("el-table-column",{attrs:{label:"客户",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number.customer))}})]}}])}),n("el-table-column",{attrs:{label:"订单编号",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number.order_number))}})]}}])}),n("el-table-column",{attrs:{label:"下单日期",align:"center",width:"100",sortable:"",prop:"order_date"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number.order_date))}})]}}])}),n("el-table-column",{attrs:{label:"订单交期",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number.deliver_date))}})]}}])}),n("el-table-column",{attrs:{label:"产品名称",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_name))}})]}}])}),n("el-table-column",{attrs:{label:"产品类别",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.proType[t.row.pro_item-1]))])]}}])}),n("el-table-column",{attrs:{label:"产品尺寸",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_size))}})]}}])}),n("el-table-column",{attrs:{label:"产品颜色",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_color))}})]}}])}),n("el-table-column",{attrs:{label:"产品包装",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_pack))}})]}}])}),n("el-table-column",{attrs:{label:"产品描述",align:"center",width:"140","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_desc))}})]}}])}),n("el-table-column",{attrs:{label:"数量",align:"center",width:"80",prop:"pro_qt"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_qt))}})]}}])}),n("el-table-column",{attrs:{label:"单价($)",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_price))}})]}}])}),n("el-table-column",{attrs:{label:"重量(g)",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.pro_weight))}})]}}])}),n("el-table-column",{attrs:{label:"汇率",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.order_number.ex_rate))}})]}}])}),n("el-table-column",{attrs:{label:"金额($)",align:"center",width:"100",prop:"sub_amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.sub_amount))}})]}}])}),n("el-table-column",{attrs:{label:"金额(¥)",align:"center",width:"100",prop:"rmb_amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-cont",domProps:{innerHTML:e._s(e.showDate(t.row.sub_amount*t.row.order_number.ex_rate))}})]}}])})],1),n("pagi-nation",{attrs:{getDataTotal:e.dataTotal},on:{pagination:e.pagination}})],1)},r=[],o=(n("a623"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("a9e3"),n("ac1f"),n("5319"),n("841c"),n("159b"),n("f8b7")),s=n("b59b"),l=n("d2c0"),i={components:{backendSearch:s["a"],pagiNation:l["a"]},data:function(){return{loading:!0,proType:["硅胶","五金","USB","移动电源","其他"],subOrderData:[],dataTotal:0}},methods:{handleSelect:function(e){this.$emit("getSelectSuborder",e)},showDate:function(e){return e+="",-1!==e.indexOf(this.search)&&""!==this.search?e.replace(this.search,'<font color="#ff4400">'+this.search+"</font>"):e},pagination:function(e){var t=this;return e||(e={page:1,page_size:10}),Object(o["c"])(e).then((function(e){var n=e.data;t.loading=!1,t.subOrderData=n.results,t.dataTotal=n.count}))},getSummaries:function(e){var t=e.columns,n=e.data,a=[];return t.forEach((function(e,t){if(0!==t){var r=n.map((function(t){return"rmb_amount"===e.property?Number(t.order_number.ex_rate*t.sub_amount):Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?a[t]="N/A":a[t]=r.reduce((function(e,t){var n=Number(t);return isNaN(n)?(console.log(e),e):e+t}),0)}else a[t]="总计"})),a},getSearchSuborder:function(e){this.subOrderData=e.results,this.dataTotal=e.count}},created:function(){this.pagination()}},c=i,u=n("2877"),d=Object(u["a"])(c,a,r,!1,null,"8f8ecab0",null);t["default"]=d.exports},"841c":function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),o=n("1d80"),s=n("129f"),l=n("14c3");a("search",1,(function(e,t,n){return[function(t){var n=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](String(n))},function(e){var a=n(t,e,this);if(a.done)return a.value;var o=r(e),i=String(this),c=o.lastIndex;s(c,0)||(o.lastIndex=0);var u=l(o,i);return s(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},a623:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").every,o=n("a640"),s=n("ae40"),l=o("every"),i=s("every");a({target:"Array",proto:!0,forced:!l||!i},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},b59b:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-autocomplete",{attrs:{"fetch-suggestions":e.queryAsync,placeholder:"请输入关键字...",clearable:""},on:{clear:e.handleSearchClear},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)},r=[],o={name:"backendSearch",data:function(){return{state:"",timeout:null}},methods:{queryAsync:function(e,t){var n={param:e};""===e?this.$emit("parentMethod"):this.$emit("parentMethod",n)},handleSearchClear:function(){this.$emit("parentMethod")}}},s=o,l=n("2877"),i=Object(l["a"])(s,a,r,!1,null,"750061e9",null);t["a"]=i.exports},d2c0:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,50,100,200],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.getDataTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.handleprevious,"next-click":e.handlenext}})],1)},r=[],o=(n("a9e3"),{name:"pagiNation",data:function(){return{page_size:10,currentPage:1}},props:{getDataTotal:{type:Number,default:0}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:1,page_size:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,page_size:this.page_size})},handleprevious:function(e){this.$emit("pagination",{page:e,page_size:this.page_size})},handlenext:function(e){this.$emit("pagination",{page:e,page_size:this.page_size})}}}),s=o,l=n("2877"),i=Object(l["a"])(s,a,r,!1,null,"212aea47",null);t["a"]=i.exports},f8b7:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return p}));var a=n("6128"),r=n("4328"),o=n.n(r);function s(e){return Object(a["a"])({url:"orders/",params:e})}function l(e,t){return Object(a["a"])({url:"orders/".concat(e,"/"),params:t})}function i(e){return Object(a["a"])({url:"orders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(e)})}function c(e,t,n){return Object(a["a"])({url:"orders/".concat(e,"/"),method:"patch",params:t,data:o.a.stringify(n)})}function u(e){return Object(a["a"])({url:"suborders/",params:e})}function d(e,t,n){return Object(a["a"])({url:"suborders/".concat(e,"/"),method:"patch",params:t,data:o.a.stringify(n)})}function p(e){return Object(a["a"])({url:"suborders/",method:"post",params:{subtoken:window.sessionStorage.getItem("subtoken")},data:o.a.stringify(e)})}}}]);
//# sourceMappingURL=chunk-44227181.ba12a714.js.map