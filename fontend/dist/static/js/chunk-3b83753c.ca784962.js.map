{"version":3,"sources":["webpack:///./src/api/token.js","webpack:///./src/views/purchase/addPurchaseorder.vue?0433","webpack:///./src/utils/makeOrderNumber.js","webpack:///src/views/purchase/addPurchaseorder.vue","webpack:///./src/views/purchase/addPurchaseorder.vue?be63","webpack:///./src/views/purchase/addPurchaseorder.vue","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/api/customer.js","webpack:///./src/views/purchase/addPurchaseorder.vue?2563"],"names":["getSubToken","request","baseURL","params","token","window","sessionStorage","getItem","st","then","res","setItem","data","subtoken","delSubtoken","removeItem","render","_vm","this","_h","$createElement","_c","_self","attrs","dialogVisible","handleClose","on","$event","staticClass","_v","ref","addPurchaseData","directives","name","rawName","value","expression","model","callback","$$v","$set","purchaserShow","_s","purchase_number","selectTest","_l","item","key","lite_name","purchaser","addPurchaseDetail","staticStyle","subPurchaseOrderData","scopedSlots","_u","fn","scope","row","order_number","pro_name","pro_size","pro_color","pro_pack","pro_desc","_f","pro_qt","pro_price","pro_weight","sub_amount","subAmount","profit_rmb","profit_usd","handleDelete","$index","submitPurchaseDetail","subdialogVisable","getSelectSuborder","slot","addNewPurchaseDetail","staticRenderFns","makeOrderNumber","arg","now","Date","year","getFullYear","month","getMonth","day","getDate","String","length","yyyyMMdd","orderNumber","Math","random","toString","substr","components","suborderDetail","customerData","customerList","subOrderData","isAdd","methods","purchaseDetaiCheck","getPurchaseDetaiData","getPurchaseNumber","forEach","el","sub_order","purchase_qt","purchase_price","purchase_amount","text","id","addNewPurchase","v","$confirm","selectSuborder","status","i","title","message","duration","promise","$message","error","hasOwnProperty","confirmButtonText","cancelButtonText","type","watch","computed","component","$","fails","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","k","len","E","A","n","arguments","TypeError","toAbsoluteIndex","toInteger","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","min","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","splice","start","deleteCount","insertCount","actualDeleteCount","from","to","actualStart","argumentsLength","postCustomer","url","method","qs","stringify","getCustomer"],"mappings":"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","file":"static/js/chunk-3b83753c.ca784962.js","sourcesContent":["import {\n    request\n} from \"../network/rquest\";\n\nexport function getSubToken() {\n    request({\n        baseURL: 'http://192.168.3.45:8000/orders/',\n        params: {\n            token: window.sessionStorage.getItem('token'),\n            st: 'addorder'\n        }\n    }).then(res => {\n        window.sessionStorage.setItem('subtoken', res.data.subtoken)\n    })\n}\n\nexport function delSubtoken() {\n    window.sessionStorage.removeItem('subtoken')\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"width\":\"90%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('h3',{staticClass:\"purchase-title\"},[_vm._v(\"采 购 单\")]),_c('hr'),_c('el-form',{ref:\"addPurchaseData\",attrs:{\"model\":_vm.addPurchaseData,\"label-width\":\"80px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"采购单号:\"}},[_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.purchaserShow),expression:\"purchaserShow\"}],model:{value:(_vm.addPurchaseData.purchase_number),callback:function ($$v) {_vm.$set(_vm.addPurchaseData, \"purchase_number\", $$v)},expression:\"addPurchaseData.purchase_number\"}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.purchaserShow),expression:\"!purchaserShow\"}]},[_vm._v(_vm._s(_vm.addPurchaseData.purchase_number))])],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"供应商:\"}},[_c('el-select',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.purchaserShow),expression:\"purchaserShow\"}],attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},on:{\"visible-change\":_vm.selectTest},model:{value:(_vm.addPurchaseData.purchaser),callback:function ($$v) {_vm.$set(_vm.addPurchaseData, \"purchaser\", $$v)},expression:\"addPurchaseData.purchaser\"}},_vm._l((_vm.customerData),function(item){return _c('el-option',{key:item.lite_name,attrs:{\"label\":item.lite_name,\"value\":item.lite_name}})}),1),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.purchaserShow),expression:\"!purchaserShow\"}]},[_vm._v(_vm._s(_vm.purchaser))])],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"采购日期:\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.addPurchaseData.purchase_date),callback:function ($$v) {_vm.$set(_vm.addPurchaseData, \"purchase_date\", $$v)},expression:\"addPurchaseData.purchase_date\"}})],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label\":\"采购交期:\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.addPurchaseData.deliver_date),callback:function ($$v) {_vm.$set(_vm.addPurchaseData, \"deliver_date\", $$v)},expression:\"addPurchaseData.deliver_date\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"备注:\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"选填\"},model:{value:(_vm.addPurchaseData.text),callback:function ($$v) {_vm.$set(_vm.addPurchaseData, \"text\", $$v)},expression:\"addPurchaseData.text\"}})],1)],1)],1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addPurchaseDetail}},[_vm._v(\"新增明细\")]),_c('el-table',{staticStyle:{\"width\":\"99.9%\"},attrs:{\"data\":_vm.subPurchaseOrderData,\"show-summary\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"订单编号\",\"width\":\"140\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.order_number.order_number))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品名称\",\"width\":\"100\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_name))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品尺寸\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_size))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品颜色\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_color))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品包装\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_pack))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品描述\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_desc))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"订单数量\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"toThousandFilter\")(scope.row.pro_qt)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品单价($)\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_price))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"产品重量(g)\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.pro_weight))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"订单金额($)\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"toThousandFilter\")(scope.row.sub_amount)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"采购数量\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{model:{value:(scope.row.purchase_qt),callback:function ($$v) {_vm.$set(scope.row, \"purchase_qt\", $$v)},expression:\"scope.row.purchase_qt\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"采购单价(¥)\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{on:{\"blur\":function($event){return _vm.subAmount(scope.row)}},model:{value:(scope.row.purchase_price),callback:function ($$v) {_vm.$set(scope.row, \"purchase_price\", $$v)},expression:\"scope.row.purchase_price\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"采购金额(¥)\",\"width\":\"120\",\"prop\":\"purchase_amount\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{model:{value:(scope.row.purchase_amount),callback:function ($$v) {_vm.$set(scope.row, \"purchase_amount\", $$v)},expression:\"scope.row.purchase_amount\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"采购毛利(¥)\",\"width\":\"100\",\"prop\":\"profit_rmb\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"toThousandFilter\")(scope.row.profit_rmb)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"采购毛利($)\",\"width\":\"100\",\"prop\":\"profit_usd\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"toThousandFilter\")(scope.row.profit_usd)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"备注\",\"width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{model:{value:(scope.row.text),callback:function ($$v) {_vm.$set(scope.row, \"text\", $$v)},expression:\"scope.row.text\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"60\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitPurchaseDetail}},[_vm._v(\"保 存\")]),_c('el-dialog',{attrs:{\"visible\":_vm.subdialogVisable,\"width\":\"99%\",\"append-to-body\":true},on:{\"update:visible\":function($event){_vm.subdialogVisable=$event}}},[_c('suborder-detail',{on:{\"getSelectSuborder\":_vm.getSelectSuborder}}),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.addNewPurchaseDetail}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//生成唯一编号\n//arg传入相关表的简写字母\nexport function makeOrderNumber(arg) {\n    const now = new Date()\n    const year = now.getFullYear();\n    let month = now.getMonth() + 1;\n    let day = now.getDate();\n    String(month).length === 1 ? (month = \"0\" + month) : month;\n    String(day).length === 1 ? (day = \"0\" + day) : day;\n    const yyyyMMdd = `${year}${month}${day}`;\n    let orderNumber = arg + yyyyMMdd + '-' + Math.random().toString(36).substr(2, 4);\n    window.sessionStorage.setItem('orderNumber', orderNumber)\n    return orderNumber\n}","<template>\n  <div>\n    <el-dialog :visible.sync=\"dialogVisible\" width=\"90%\" :before-close=\"handleClose\">\n      <h3 class=\"purchase-title\">采 购 单</h3>\n      <hr />\n      <el-form :model=\"addPurchaseData\" ref=\"addPurchaseData\" label-width=\"80px\">\n        <el-row>\n          <el-col :span=\"6\">\n            <el-form-item label=\"采购单号:\">\n              <el-input v-model=\"addPurchaseData.purchase_number\" v-show=\"purchaserShow\"></el-input>\n              <span v-show=\"!purchaserShow\">{{addPurchaseData.purchase_number}}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"供应商:\">\n              <el-select\n                v-model=\"addPurchaseData.purchaser\"\n                filterable\n                placeholder=\"请选择\"\n                @visible-change=\"selectTest\"\n                v-show=\"purchaserShow\"\n              >\n                <el-option\n                  v-for=\"item in customerData\"\n                  :key=\"item.lite_name\"\n                  :label=\"item.lite_name\"\n                  :value=\"item.lite_name\"\n                ></el-option>\n              </el-select>\n              <span v-show=\"!purchaserShow\">{{purchaser}}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"采购日期:\">\n              <el-date-picker\n                v-model=\"addPurchaseData.purchase_date\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\"\n              ></el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"采购交期:\">\n              <el-date-picker\n                v-model=\"addPurchaseData.deliver_date\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\"\n              ></el-date-picker>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注:\">\n              <el-input type=\"textarea\" :rows=\"2\" v-model=\"addPurchaseData.text\" placeholder=\"选填\"></el-input>\n            </el-form-item>\n            <!-- <el-form-item>\n              <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n              <el-button>取消</el-button>\n            </el-form-item>-->\n          </el-col>\n        </el-row>\n      </el-form>\n      <el-button type=\"primary\" @click=\"addPurchaseDetail\">新增明细</el-button>\n      <el-table\n        :data=\"subPurchaseOrderData\"\n        style=\"width: 99.9%\"\n        show-summary\n        highlight-current-row\n      >\n        <el-table-column label=\"订单编号\" width=\"140\" fixed>\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.order_number.order_number }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品名称\" width=\"100\" fixed>\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品尺寸\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_size }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品颜色\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_color }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品包装\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_pack }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品描述\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_desc }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"订单数量\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.pro_qt | toThousandFilter}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品单价($)\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.pro_price}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"产品重量(g)\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.pro_weight}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"订单金额($)\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.sub_amount | toThousandFilter}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"采购数量\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.purchase_qt\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"采购单价(¥)\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.purchase_price\" @blur=\"subAmount(scope.row)\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"采购金额(¥)\" width=\"120\" prop=\"purchase_amount\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.purchase_amount\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"采购毛利(¥)\" width=\"100\" prop=\"profit_rmb\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.profit_rmb | toThousandFilter}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"采购毛利($)\" width=\"100\" prop=\"profit_usd\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.profit_usd | toThousandFilter}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\" width=\"140\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.text\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"60\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"handleDelete(scope.$index, scope.row)\" type=\"text\" size=\"mini\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-button type=\"primary\" @click=\"submitPurchaseDetail\">保 存</el-button>\n\n      <el-dialog :visible.sync=\"subdialogVisable\" width=\"99%\" :append-to-body=\"true\">\n        <suborder-detail @getSelectSuborder=\"getSelectSuborder\"></suborder-detail>\n        <!-- <suborder-detail></suborder-detail> -->\n        <span slot=\"footer\">\n          <el-button @click=\"addNewPurchaseDetail\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { patchSubOrder } from '@/api/order'\nimport { getCustomer } from '@/api/customer'\nimport { postPurchase } from '@/api/purchase'\nimport { getSubToken, delSubtoken } from '@/api/token'\nimport { makeOrderNumber } from '../../utils/makeOrderNumber'\nimport {\n  postPurchaseDetail,\n  getPurchaseDetail,\n  patchPurchase,\n  patchPurchaseDetail\n} from '@/api/purchase'\nimport suborderDetail from '../order/suborderdetail'\n// import purchaseDetail from './purchaseDetail'\nexport default {\n  name: 'addPurchaseorder',\n  components: {\n    suborderDetail\n  },\n  data() {\n    return {\n      customerData: [],\n      customerList: [],\n      dialogVisible: false,\n      addPurchaseData: {},\n      subdialogVisable: false,\n      subPurchaseOrderData: [],\n      subOrderData: [],\n      purchaserShow: true,\n      purchaser: '',\n      isAdd: true\n      //传递给订单明细表,控制显示参数\n    }\n  },\n  methods: {\n    //从采购明细打开\n    purchaseDetaiCheck(row) {\n      this.dialogVisible = true\n      this.purchaserShow = false\n      this.isAdd = false\n      this.addPurchaseData = row.purchase_number\n      this.purchaser = row.purchase_number.purchaser.lite_name\n      this.getPurchaseDetaiData({\n        purchase_number: row.purchase_number.purchase_number\n      })\n    },\n    //获取查看采购时的采购单号\n    getPurchaseNumber(row) {\n      this.dialogVisible = true\n      this.purchaserShow = false\n      this.isAdd = false\n      this.addPurchaseData = row\n      this.purchaser = row.purchaser.lite_name\n      this.getPurchaseDetaiData({ purchase_number: row.purchase_number })\n    },\n    //通过采购单号获取采购明细\n    getPurchaseDetaiData(num) {\n      getPurchaseDetail(num).then(res => {\n        res.data.forEach(el => {\n          this.subPurchaseOrderData.push({\n            order_number: el.sub_order.order_number,\n            pro_name: el.sub_order.pro_name,\n            pro_size: el.sub_order.pro_size,\n            pro_color: el.sub_order.pro_color,\n            pro_pack: el.sub_order.pro_pack,\n            pro_desc: el.sub_order.pro_desc,\n            pro_qt: el.sub_order.pro_qt,\n            pro_price: el.sub_order.pro_price,\n            pro_weight: el.sub_order.pro_weight,\n            sub_amount: el.sub_order.sub_amount,\n            purchase_qt: el.purchase_qt,\n            purchase_price: el.purchase_price,\n            purchase_amount: el.purchase_amount,\n            profit_rmb: (\n              el.sub_order.sub_amount * el.sub_order.order_number.ex_rate -\n              el.purchase_amount\n            ).toFixed(2),\n            profit_usd: (\n              el.sub_order.sub_amount -\n              el.purchase_amount / el.sub_order.order_number.ex_rate\n            ).toFixed(2),\n            text: el.text,\n            id: el.id\n          })\n        })\n      })\n    },\n    //新增采购按钮\n    addNewPurchase() {\n      this.dialogVisible = true\n      getSubToken()\n      this.addPurchaseData.purchase_number = makeOrderNumber('PC')\n    },\n    //供应商名称选择时,调用后台客户数据\n    selectTest(v) {\n      if (v === true) {\n        getCustomer().then(res => {\n          this.customerData = res.data\n        })\n      }\n    },\n    //关闭弹出前的回调\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n        .then(_ => {\n          ;(this.addPurchaseData = {}),\n            (this.subPurchaseOrderData = []),\n            (this.subOrderData = []),\n            done()\n        })\n        .catch(_ => {})\n    },\n    //新增采购明细按钮\n    addPurchaseDetail() {\n      this.subdialogVisable = true\n      getSubToken()\n    },\n    //选择订单明细\n    getSelectSuborder(selectSuborder) {\n      this.subOrderData = selectSuborder\n    },\n    //选择订单明细后,确定新增采购明细\n    addNewPurchaseDetail() {\n      this.subdialogVisable = false\n      this.subOrderData.forEach(el => {\n        this.subPurchaseOrderData.push({\n          order_number: el.order_number,\n          pro_name: el.pro_name,\n          pro_size: el.pro_size,\n          pro_color: el.pro_color,\n          pro_pack: el.pro_pack,\n          pro_desc: el.pro_desc,\n          pro_qt: el.pro_qt,\n          pro_price: el.pro_price,\n          pro_weight: el.pro_weight,\n          sub_amount: el.sub_amount,\n          purchase_qt: el.pro_qt,\n          purchase_price: '',\n          purchase_amount: '',\n          profit_rmb: '',\n          profit_usd: '',\n          text: '选填',\n          status: 1,\n          id: el.id\n        })\n      })\n    },\n    //合计采购金额\n    subAmount(row) {\n      row.purchase_amount = row.purchase_qt * row.purchase_price * 1\n      row.profit_rmb = (\n        row.sub_amount * row.order_number.ex_rate -\n        row.purchase_amount\n      ).toFixed(2)\n      row.profit_usd = (\n        row.sub_amount -\n        row.purchase_amount / row.order_number.ex_rate\n      ).toFixed(2)\n    },\n    //保存\n    submitPurchaseDetail() {\n      if (\n        !this.addPurchaseData.purchaser ||\n        !this.addPurchaseData.purchase_date ||\n        !this.addPurchaseData.deliver_date\n      ) {\n        this.$message.error('请完整填写采购信息!')\n      } else {\n        if (!window.sessionStorage.getItem('subtoken')) {\n          this.$message.error('请勿重复提交,或刷新重试')\n        } else {\n          let promise = new Promise((resolve, reject) => {\n            if (!this.isAdd) {\n              patchPurchase(\n                this.addPurchaseData.purchase_number,\n                this.addPurchaseData\n              ).then(res => {\n                for (const i of this.subPurchaseOrderData) {\n                  if (!i.status) {\n                    patchPurchaseDetail(i.id, i).then(res => {\n                      this.$notify({\n                        title: 'succsess',\n                        message: `${i.order_number.order_number}-${i.pro_name}修改成功`,\n                        type: 'success'\n                      })\n                    })\n                  } else {\n                    i.purchase_number = this.addPurchaseData.purchase_number\n                    i.sub_order = i.id\n                    postPurchaseDetail(i)\n                      .then(res => {\n                        patchSubOrder(i.id, '', { is_purchase: 0 }).then(\n                          res => {\n                            this.$notify({\n                              title: 'succsess',\n                              message: `${i.order_number.order_number}-${i.pro_name}提交成功`,\n                              type: 'success'\n                            })\n                          }\n                        )\n                      })\n                      .catch(error => {\n                        this.$notify.error({\n                          title: 'error',\n                          message: `${i.order_number.order_number}-${i.pro_name} 提交失败,请刷新重录`,\n                          duration: 0\n                        })\n                      })\n                  }\n                }\n              })\n            } else {\n              //TODO:新增采购之后调用这个方法不能更新采购单分页的合计数量\n              this.$store\n                .dispatch(\n                  'purchaseStore/addPurchaseOrder',\n                  this.addPurchaseData\n                )\n                .then(res => {\n                  resolve(res)\n                  for (const i of this.subPurchaseOrderData) {\n                    i.purchase_number = this.addPurchaseData.purchase_number\n                    i.sub_order = i.id\n                    postPurchaseDetail(i)\n                      .then(res => {\n                        patchSubOrder(i.id, '', { is_purchase: 0 }).then(\n                          res => {\n                            this.$notify({\n                              title: 'succsess',\n                              message: `${i.order_number.order_number}-${i.pro_name}提交成功`,\n                              type: 'success'\n                            })\n                          }\n                        )\n                      })\n                      .catch(error => {\n                        this.$notify.error({\n                          title: 'error',\n                          message: `${i.order_number.order_number}-${i.pro_name} 提交失败,请刷新重录`,\n                          duration: 0\n                        })\n                      })\n                  }\n                })\n                .catch(error => {\n                  this.$notify.error({\n                    title: 'error',\n                    message: '提交失败!请刷新重试'\n                  })\n                })\n            }\n          })\n          //TODO:这里不会删除subtoken???\n          promise.then(res => {\n            delSubtoken()\n          })\n        }\n      }\n    },\n    // 删除明细\n    handleDelete(index, row) {\n      if (!row.hasOwnProperty('id')) {\n        this.$confirm('数据未保存,确定删除?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n          .then(() => {\n            this.subPurchaseOrderData.splice(index, 1)\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n          })\n          .catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            })\n          })\n      } else {\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n          .then(() => {\n            this.subPurchaseOrderData.splice(index, 1)\n            patchPurchaseDetail(row.id, { is_delete: 0 }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              })\n            })\n          })\n          .catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            })\n          })\n      }\n    }\n  },\n  watch: {},\n  computed: {}\n}\n</script>\n\n<style scoped>\n.purchase-title {\n  margin-bottom: 10px;\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPurchaseorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPurchaseorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addPurchaseorder.vue?vue&type=template&id=1619870b&scoped=true&\"\nimport script from \"./addPurchaseorder.vue?vue&type=script&lang=js&\"\nexport * from \"./addPurchaseorder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addPurchaseorder.vue?vue&type=style&index=0&id=1619870b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1619870b\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","import {\n    request\n} from \"../network/rquest\";\nimport qs from 'qs';\n\nexport function postCustomer(data) {\n    return request({\n        url: 'customers/',\n        method: 'post',\n        params: {\n            subtoken: window.sessionStorage.getItem('subtoken')\n        },\n        data: qs.stringify(data)\n    })\n}\n\nexport function getCustomer(params) {\n    return request({\n        url: 'customers/',\n        params: params\n    })\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPurchaseorder.vue?vue&type=style&index=0&id=1619870b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addPurchaseorder.vue?vue&type=style&index=0&id=1619870b&scoped=true&lang=css&\""],"sourceRoot":""}