(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bc35480"],{"0323":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:4}},[a("backend-search",{on:{parentMethod:t.pagination}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproductType}},[t._v("新增类别")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproductData}},[t._v("新增产品")])],1)],1),a("add-product",{attrs:{addProductVisble:t.addProductVisible},on:{closeAddProductDialog:t.closeAddProductDialog}}),a("addProduct-type",{attrs:{visible:t.addproductTypeVisible},on:{closeAddproductType:t.closeAddproductType}})],1)},l=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{},attrs:{data:t.productsData,border:"","show-summary":"","highlight-current-row":"","row-class-name":t.tableRowClassName,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{label:"产品类别",align:"center",width:"80",fiexd:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":t.handleProductTypeSelect},model:{value:e.sub_type,callback:function(a){t.$set(e,"sub_type",a)},expression:"scope.sub_type"}},t._l(t.productTypeData,(function(t){return a("el-option",{key:t.sub_type,attrs:{label:t.sub_type,value:t.sub_type}})})),1),0===e.is_edit?a("span",[t._v(t._s(e.sub_type))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"seo标题",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.seo_title,callback:function(a){t.$set(e,"seo_title",a)},expression:"scope.seo_title"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.seo_title))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"seo描述",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.seo_desc,callback:function(a){t.$set(e,"seo_desc",a)},expression:"scope.seo_desc"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.seo_desc))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"添加日期",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.pub_date))])]}}])}),a("el-table-column",{attrs:{label:"产品编号",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_number,callback:function(a){t.$set(e,"pro_number",a)},expression:"scope.pro_number"}},[t._v(t._s(e.sub_type+"-"+Math.random().toString(36).substr(2,4)))]):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_number))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_name,callback:function(a){t.$set(e,"pro_name",a)},expression:"scope.pro_name"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_name))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"产品尺寸",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_size,callback:function(a){t.$set(e,"pro_size",a)},expression:"scope.pro_size"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_size))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"产品型号",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_model,callback:function(a){t.$set(e,"pro_model",a)},expression:"scope.pro_model"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_model))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"产品包装",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_pack,callback:function(a){t.$set(e,"pro_pack",a)},expression:"scope.pro_pack"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_pack))]):t._e()]}}])}),a("el-table-column",{attrs:{width:"150",label:"产品颜色"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("add-product-color",{attrs:{parentProColor:e,addColorBtn:t.childAddColorBtn=!1},on:{getProColor:t.handleSelect,delProColor:t.delProColor}})]}}])}),a("el-table-column",{attrs:{label:"产品重量",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.is_edit?a("el-input",{model:{value:e.pro_weight,callback:function(a){t.$set(e,"pro_weight",a)},expression:"scope.pro_weight"}}):t._e(),0===e.is_edit?a("span",[t._v(t._s(e.pro_weight))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"产品图片",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pic-carousel",{ref:"picCar",attrs:{proPicUrl:e.pro_pic}}),a("upload-pic",{attrs:{number:e.pro_number,owner:"product",index:e.$index},on:{sendPicUrl:t.getPicUrl}})]}}])}),a("el-table-column",{attrs:{label:"产品详情",align:"center",width:"100"}},[a("rich-text")],1)],1)],1)},i=[],n=(a("4160"),a("c975"),a("ac1f"),a("1276"),a("159b"),a("6128")),s=a("4328"),c=a.n(s);function d(t){return Object(n["a"])({url:"product_type/",params:t})}function u(t){return Object(n["a"])({url:"product_type/",method:"post",data:c.a.stringify(t)})}var p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("el-carousel",{attrs:{trigger:"click",height:"150px"}},t._l(t.picUrlList,(function(t,e){return a("el-carousel-item",{key:e},[a("img",{staticClass:"car-img",attrs:{src:t}})])})),1)],1)},f=[],b={name:"picCarousel",data:function(){return{picUrlList:[]}},props:{proPicUrl:String},methods:{handlePicUrl:function(){var t=this;void 0!==this.proPicUrl&&this.proPicUrl.split("|").forEach((function(e){""!==e&&t.picUrlList.push(e)}))},addPicUrl:function(t){this.picUrlList.push(t)}},created:function(){this.handlePicUrl()}},_=b,m=(a("5cc5"),a("2877")),h=Object(m["a"])(_,p,f,!1,null,null,null),g=h.exports,y=a("4c60"),v=a("6cbe"),P=a("2822"),D={name:"ProductTable",components:{picCarousel:g,uploadPic:y["a"],richText:v["a"],addProductColor:P["a"]},props:{productsData:{type:Array,default:[]}},data:function(){return{productTypeData:[],childAddColorBtn:!0,loading:!1}},methods:{handleProductTypeSelect:function(t){var e=this;!0===t&&d().then((function(t){e.productTypeData=t.data}))},delProColor:function(t,e){var a="";this.productsData[e].pro_color.split("|").forEach((function(e,o){-1===e.indexOf(t)&&""!==e&&(a+=e+"|")})),this.productsData[e].pro_color=a},handleSelect:function(t,e){""===this.productsData[e].pro_color?this.productsData[e].pro_color=JSON.stringify(t)+"|":this.productsData[e].pro_color+=JSON.stringify(t)+"|"},tableRowClassName:function(){return""},getPicUrl:function(t,e){0===this.productsData[e].pro_pic.length?(this.productsData[e].pro_pic=JSON.stringify(t)+"|",this.$refs.picCar.addPicUrl(t)):(this.productsData[e].pro_pic+=JSON.stringify(t)+"|",this.$refs.picCar.addPicUrl(t))}}},k=D,x=Object(m["a"])(k,r,i,!1,null,"5743dd05",null),w=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"productTypeData",attrs:{model:t.productTypeData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品大类",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productTypeData.type,callback:function(e){t.$set(t.productTypeData,"type",e)},expression:"productTypeData.type"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"产品子类",prop:"sub_type"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.productTypeData.sub_type,callback:function(e){t.$set(t.productTypeData,"sub_type",e)},expression:"productTypeData.sub_type"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),a("el-button",[t._v("取消")])],1)],1)],1)},$=[],C=(a("d3b7"),{data:function(){return{rueles:{type:[{required:!0,message:"请选择产品大类",trigger:"blur"}],sub_type:[{required:!0,message:"请输入产品子类",trigger:"blur"}]},productTypeData:{type:"",sub_type:""},options:[{value:1,label:"硅胶产品"},{value:2,label:"五金产品"},{value:3,label:"电子产品"},{value:4,label:"塑胶产品"},{value:5,label:"木制产品"},{value:6,label:"其他产品"}]}},props:{visible:{type:Boolean,default:!1}},methods:{onSubmit:function(){var t=this;u(this.productTypeData).then((function(e){t.$message({message:"创建成功",type:"seccuss"}),t.$emit("closeAddproductType","close")})).catch((function(e){t.$message({message:"网络错误,请稍后重试",type:"warning"})}))},handleClose:function(t){var e=this;new Promise((function(t,a){e.$emit("closeAddproductType"),t()})).then((function(e){t()}))}}}),T=C,U=Object(m["a"])(T,S,$,!1,null,null,null),O=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"",visible:t.addProductVisble,width:"90%","before-close":t.close},on:{"update:visible":function(e){t.addProductVisble=e}}},[a("el-form",{ref:"addProductData",attrs:{model:t.addProductData,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品类别"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{"visible-change":t.handleProductTypeSelect},model:{value:t.addProductData.sub_type,callback:function(e){t.$set(t.addProductData,"sub_type",e)},expression:"addProductData.sub_type"}},t._l(t.productTypeData,(function(t){return a("el-option",{key:t.sub_type,attrs:{label:t.sub_type,value:t.sub_type}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品编号"}},[a("span",[t._v(t._s(t.addProductData.pro_number))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:t.addProductData.pro_name,callback:function(e){t.$set(t.addProductData,"pro_name",e)},expression:"addProductData.pro_name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品尺寸"}},[a("el-input",{model:{value:t.addProductData.pro_size,callback:function(e){t.$set(t.addProductData,"pro_size",e)},expression:"addProductData.pro_size"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品重量"}},[a("el-input",{model:{value:t.addProductData.pro_weight,callback:function(e){t.$set(t.addProductData,"pro_weight",e)},expression:"addProductData.pro_weight"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品规格"}},[a("el-input",{model:{value:t.addProductData.pro_model,callback:function(e){t.$set(t.addProductData,"pro_model",e)},expression:"addProductData.pro_model"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品包装"}},[a("el-input",{model:{value:t.addProductData.pro_pack,callback:function(e){t.$set(t.addProductData,"pro_pack",e)},expression:"addProductData.pro_pack"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"seo标题"}},[a("el-input",{model:{value:t.addProductData.seo_title,callback:function(e){t.$set(t.addProductData,"seo_title",e)},expression:"addProductData.seo_title"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"seo描述"}},[a("el-input",{model:{value:t.addProductData.seo_desc,callback:function(e){t.$set(t.addProductData,"seo_desc",e)},expression:"addProductData.seo_desc"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品颜色"}},[a("add-product-color",{attrs:{ProductColor:t.addProductData,addColorBtn:t.childAddColorBtn=!1},on:{getProColor:t.handleSelect,delProColor:t.delProColor}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("upload-pic",{attrs:{number:t.addProductData.pro_number,owner:"product"},on:{sendPicUrl:t.getPicUrl}}),a("span",[t._v(t._s(t.addProductData.pro_pic))])],1),a("el-col",{attrs:{span:6}},[a("pic-carousel",{ref:"picCar",attrs:{proPicUrl:t.addProductData.pro_pic}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("ckeditor",{attrs:{config:t.editorConfig},model:{value:t.addProductData.pro_desc,callback:function(e){t.$set(t.addProductData,"pro_desc",e)},expression:"addProductData.pro_desc"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),a("el-button",[t._v("取消")])],1)],1)],1)},A=[],E={name:"addProduct",components:{picCarousel:g,uploadPic:y["a"],richText:v["a"],addProductColor:P["a"]},props:{addProductVisble:{type:Boolean,default:!1}},data:function(){return{productTypeData:[],addProductData:{pro_color:"",pro_pic:""},childAddColorBtn:!0,editorConfig:{toolbar:[["Source"],["Styles","Format","Font","FontSize"],["Bold","Italic"],["Undo","Redo"],["Image"],["About"]]}}},methods:{handleProductTypeSelect:function(t){var e=this;!0===t&&d().then((function(t){e.productTypeData=t.data.results}))},delProColor:function(t,e){var a="";this.productsData[e].pro_color.split("|").forEach((function(e,o){-1===e.indexOf(t)&&""!==e&&(a+=e+"|")})),this.productsData[e].pro_color=a},handleSelect:function(t){""===this.addProductData.pro_color?this.addProductData.pro_color=JSON.stringify(t)+"|":this.addProductData.pro_color+=JSON.stringify(t)+"|"},getPicUrl:function(t,e){0===this.addProductData.pro_pic.length?(this.addProductData.pro_pic=JSON.stringify(t)+"|",this.$refs.picCar.addPicUrl(t)):(this.addProductData.pro_pic+=JSON.stringify(t)+"|",this.$refs.picCar.addPicUrl(t))},onSubmit:function(){console.log(this.addProductData)},close:function(){var t=this;this.$confirm("数据未保存,确认关闭?").then((function(e){new Promise((function(e,a){t.$emit("closeAddProductDialog"),e()})).then((function(e){t.addProductData={}}))})).catch((function(t){}))}}},N=E,j=Object(m["a"])(N,V,A,!1,null,null,null),z=j.exports,B=a("b59b"),J={components:{ProductTable:w,addProductType:O,backendSearch:B["a"],addProduct:z},data:function(){return{productsData:[],addproductTypeVisible:!1,addProductVisible:!1}},methods:{pagination:function(){},addproductType:function(){this.addproductTypeVisible=!0},addproductData:function(){this.addProductVisible=!0},closeAddproductType:function(){this.addproductTypeVisible=!1},closeAddProductDialog:function(){this.addProductVisible=!1}}},I=J,L=Object(m["a"])(I,o,l,!1,null,"2dfc3d1f",null);e["default"]=L.exports},"033e":function(t,e,a){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"4c60":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.picdialogVisible=!0}}},[t._v("+")]),a("el-dialog",{attrs:{title:"",visible:t.picdialogVisible,width:"50%"},on:{"update:visible":function(e){t.picdialogVisible=e}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.actionUrl,"on-success":t.uploadSuccess,"file-list":t.fileList,limit:1,data:t.uploadData,accept:"image/jpg, image/jpeg, image/png","auto-upload":!1,"on-exceed":t.handleExceed}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.uploadBtn}},[t._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)},l=[],r=(a("a9e3"),{name:"uploadPic",props:{owner:String,index:{type:Number,default:99},number:{type:String,default:"default"},is_home:{type:Number,default:0},home_index:{type:Number,default:0},is_banner:{type:Number,default:0}},data:function(){return{picdialogVisible:!1,actionUrl:"https://chinagoodgifts.com/api/upload/",fileList:[],uploadData:{token:window.localStorage.getItem("token"),owner:this.owner,number:this.number,is_home:this.is_home,home_index:this.home_index,is_banner:this.is_banner}}},methods:{uploadSuccess:function(t){switch(t.status){case 1e3:this.$message("上传成功"),this.$emit("sendPicUrl","https://chinagoodgifts.com/image/"+t.file,this.index);break;case 1001:this.$message.error("图片尺寸太大,请选择500kb以下的图片");break;case 1002:this.$message.error("非法的文件格式,或图片已损坏");break;case 1003:this.$message("找到相同的图片"),this.$emit("sendPicUrl","https://chinagoodgifts.com/image/"+t.file,this.index);default:break}},handleExceed:function(){this.$message.error("单次只能上传一张图片")},uploadBtn:function(){""===this.number?this.$message.error("请完整填写订单信息!"):(this.uploadData.number=this.number,this.$refs.upload.submit())}}}),i=r,n=a("2877"),s=Object(n["a"])(i,o,l,!1,null,null,null);e["a"]=s.exports},"5cc5":function(t,e,a){"use strict";var o=a("033e"),l=a.n(o);l.a},"6cbe":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.descDialogVisible=!0}}},[t._v("编辑")]),a("el-dialog",{attrs:{title:"",visible:t.descDialogVisible,width:"50%"},on:{"update:visible":function(e){t.descDialogVisible=e}}},[a("ckeditor",{model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)],1)},l=[],r={name:"richText",data:function(){return{editorData:"",descDialogVisible:!1}},methods:{submit:function(){this.$emit("submitRichData",this.editorData)}}},i=r,n=a("2877"),s=Object(n["a"])(i,o,l,!1,null,null,null);e["a"]=s.exports},"841c":function(t,e,a){"use strict";var o=a("d784"),l=a("825a"),r=a("1d80"),i=a("129f"),n=a("14c3");o("search",1,(function(t,e,a){return[function(e){var a=r(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,a):new RegExp(e)[t](String(a))},function(t){var o=a(e,t,this);if(o.done)return o.value;var r=l(t),s=String(this),c=r.lastIndex;i(c,0)||(r.lastIndex=0);var d=n(r,s);return i(r.lastIndex,c)||(r.lastIndex=c),null===d?-1:d.index}]}))},b59b:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"请输入关键字..."},on:{clear:t.handleSearchClear,input:t.handleInput},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendSearch(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.sendSearch},slot:"append"})],1)],1)},l=[],r=(a("ac1f"),a("841c"),{name:"backendSearch",data:function(){return{search:""}},methods:{handleInput:function(){""===this.search&&this.$emit("parentMethod")},sendSearch:function(){var t=this.search;if(t){var e={param:t};this.$emit("parentMethod",e)}},handleSearchClear:function(){this.$emit("parentMethod")}}}),i=r,n=a("2877"),s=Object(n["a"])(i,o,l,!1,null,"01077c5a",null);e["a"]=s.exports}}]);